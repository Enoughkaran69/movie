<!DOCTYPE html>
<html>
<head>
  <title>Playing</title>
  <script type="text/javascript" src="https://ssl.p.jwpcdn.com/player/v/8.36.3/jwplayer.js"></script>
</head>
<body>

<div id="my-video-player" style="width: 640px; height: 360px;"></div>

<script type="text/javascript">
  // Function to get query parameters
  function getQueryParams() {
      const params = new URLSearchParams(window.location.search);
      return params.get('id');
  }

  // Retrieve query parameter and local storage value
  const id = getQueryParams();
  const hValue = localStorage.getItem('t_hash_t') || '';

  // JW Player defaults
  var jwDefaults = {
    "autostart": "viewable",
    "controls": true,
    "defaultBandwidthEstimate": 10000,
    "key": "c6Wt+3BVVfc9af5UKM76pP5Vxu+Tu55CBvqMZGg3pEc=",
    "preload": "auto",
    "skin": {
      "controlbar": {
        "background": "rgba(245, 245, 245, 0)",
        "icons": "#ffffff",
        "iconsActive": "rgb(244, 129, 129)"
      },
      "timeslider": {
        "progress": "rgba(253, 0, 0)",
        "rail": "rgba(247, 244, 244, 0.40)",
        "buffer": "rgb(255, 255, 255)"
      }
    },
    "stretching": "fill",
    "width": "100%",
    "height": "100%",
    "pipIcon": "disabled"
  };

  // Initialize JW Player with dynamic file and image
  jwplayer("my-video-player").setup({
    file: `https://iosmirror.cc/hls/${encodeURIComponent(id)}.m3u8?in=${encodeURIComponent(hValue)}`, // Use backticks for string interpolation
    image: `https://imgcdn.media/poster/1920/${encodeURIComponent(id)}.jpg`, // Use backticks for string interpolation
    ...jwDefaults
  });
</script>

</body>
</html>
