<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Information</title>
</head>
<body>
    <div id="video-container">
        <!-- Video content will be dynamically added here -->
    </div>

    <script type="text/javascript">
        try {
            async function fetchAndDisplayVideo() {
                // Get query parameters
                function getQueryParams() {
                    const params = new URLSearchParams(window.location.search);
                    return params.get('id');
                }

                const id = getQueryParams();
                const hValue = localStorage.getItem('t_hash_t') || '';

                // Fetch JSON data
                const response = await fetch(`https://cors.karankingrider.workers.dev/?url=https://flask-hello-world-coral-kappa-40.vercel.app/m?h=${encodeURIComponent(hValue)}&q=${encodeURIComponent(id)}`);
                const data = await response.json();

                // Extract video information
                const searchResult = data.searchResult[0];
                const image = searchResult.image;
                const sources = searchResult.sources;

                // Dynamically create video content
                const container = document.getElementById('video-container');
                const videoHTML = `
                    <div>
                        <img src="${image}" alt="Video Thumbnail" style="width: 100%; max-width: 600px; height: auto;" />
                        <h2>Video Sources</h2>
                        <ul>
                            ${sources.map(source => `<li><a href="${source}" target="_blank">${source}</a></li>`).join('')}
                        </ul>
                    </div>
                `;
                container.innerHTML = videoHTML;
            }

            // Call the function to fetch and display video
            fetchAndDisplayVideo();
        } catch (error) {
            console.error('An error occurred:', error);
        }
    </script>
</body>
</html>
